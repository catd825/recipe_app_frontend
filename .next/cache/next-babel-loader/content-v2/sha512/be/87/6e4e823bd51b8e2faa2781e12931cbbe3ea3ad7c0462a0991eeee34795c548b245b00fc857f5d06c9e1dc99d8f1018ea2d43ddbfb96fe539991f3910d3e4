{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/catherineadonofrio/Development/code/Mod6/recipe_app/recipe_tracker_frontend/src/Components/EditForm.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { useState } from 'react'; // import { useRouter } from 'next/router'\n\nimport { CURRENT_USER } from '../current_user';\nimport { useRecipeContext } from '../RecipeContext/state';\nexport default function EditForm({\n  recipe,\n  setEditState,\n  editHelper\n}) {\n  const {\n    recipes,\n    setRecipes\n  } = useRecipeContext();\n  const current_user = CURRENT_USER; //Pre-populate input fields with previous data\n\n  const formObj = {\n    id: recipe.id,\n    recipe_creator_id: current_user,\n    //only for testing before auth fully implemented\n    title: recipe.title,\n    ingredients: recipe.ingredients,\n    instructions: recipe.instructions,\n    img_url: recipe.img_url,\n    description: recipe.description\n  }; //Set initial formData state to object to edit\n\n  const {\n    0: formData,\n    1: setFormData\n  } = useState(formObj); //Set state to capture only changes made\n\n  const changeHandler = e => {\n    setFormData(_objectSpread(_objectSpread({}, formData), {}, {\n      [e.target.name]: e.target.value\n    })); // console.log(e.target.value)\n  };\n\n  const submitHelper = e => {\n    e.preventDefault();\n    submitHandler();\n  };\n\n  const submitHandler = async () => {\n    const configObj = {\n      method: 'PATCH',\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json'\n      },\n      body: JSON.stringify(formData)\n    };\n    const res = await fetch(`http://localhost:3000/recipes/${recipe.id}`, configObj);\n    const data = await res.json(); //Toggle edit page to disappear\n\n    setEditState(null);\n    editHelper(formData);\n    const updatedRecipeArray = recipes.filter(recipe => recipe.id !== data.id);\n    setRecipes([...updatedRecipeArray, data].sort());\n    console.log(data);\n    /*\n    //Invoke refresh helper\n    if (res.status < 300) {\n        refreshData();\n    }\n    */\n  }; // //Define router and helper function to refresh upon edit submission\n  // const router = useRouter();\n  // const refreshData = () => {\n  //     router.replace(router.asPath);\n  // }\n\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: '2em'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: submitHelper,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Recipe Name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          onChange: changeHandler,\n          value: formData.title,\n          type: \"text\",\n          name: \"title\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Ingredients\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          onChange: changeHandler,\n          value: formData.ingredients,\n          type: \"text\",\n          name: \"ingredients\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Instructions\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          onChange: changeHandler,\n          value: formData.instructions,\n          type: \"text\",\n          name: \"instructions\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Add Photo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          onChange: changeHandler,\n          value: formData.img_url,\n          type: \"text\",\n          name: \"img_url\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Description\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          onChange: changeHandler,\n          value: formData.description,\n          type: \"text\",\n          name: \"description\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n}","map":{"version":3,"sources":["/Users/catherineadonofrio/Development/code/Mod6/recipe_app/recipe_tracker_frontend/src/Components/EditForm.js"],"names":["useState","CURRENT_USER","useRecipeContext","EditForm","recipe","setEditState","editHelper","recipes","setRecipes","current_user","formObj","id","recipe_creator_id","title","ingredients","instructions","img_url","description","formData","setFormData","changeHandler","e","target","name","value","submitHelper","preventDefault","submitHandler","configObj","method","headers","body","JSON","stringify","res","fetch","data","json","updatedRecipeArray","filter","sort","console","log","padding"],"mappings":"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","sourcesContent":["import { useState } from 'react'\n// import { useRouter } from 'next/router'\nimport { CURRENT_USER } from '../current_user'\nimport { useRecipeContext } from '../RecipeContext/state'\n\nexport default function EditForm ({ recipe, setEditState, editHelper }) {\n\n    const {recipes, setRecipes} = useRecipeContext();\n\n    const current_user = CURRENT_USER\n    //Pre-populate input fields with previous data\n    const formObj = {\n        id: recipe.id,\n        recipe_creator_id: current_user, //only for testing before auth fully implemented\n        title: recipe.title,\n        ingredients: recipe.ingredients,\n        instructions: recipe.instructions,\n        img_url: recipe.img_url,\n        description: recipe.description\n    }\n\n    //Set initial formData state to object to edit\n    const [formData, setFormData] = useState(formObj)\n    //Set state to capture only changes made\n    const changeHandler = (e) => {\n        setFormData({\n            ...formData, \n            [e.target.name]: e.target.value\n        })\n        // console.log(e.target.value)\n    }\n\n    const submitHelper = (e) => {\n        e.preventDefault()\n        submitHandler()\n    }\n\n\n    const submitHandler = async () => {\n        const configObj = {\n            method: 'PATCH',\n            headers: {\n                'Content-Type': 'application/json',\n                'Accept': 'application/json',\n            },\n            body: JSON.stringify(formData)\n        }\n\n        const res = await fetch(`http://localhost:3000/recipes/${recipe.id}`, configObj)\n        const data = await res.json();\n        //Toggle edit page to disappear\n        setEditState(null)\n        editHelper(formData)\n\n        const updatedRecipeArray = recipes.filter(recipe => recipe.id !== data.id)\n\n        setRecipes([\n            ...updatedRecipeArray, data\n        ].sort())\n        console.log(data)\n        /*\n        //Invoke refresh helper\n        if (res.status < 300) {\n            refreshData();\n        }\n        */\n    }\n\n        // //Define router and helper function to refresh upon edit submission\n        // const router = useRouter();\n        // const refreshData = () => {\n        //     router.replace(router.asPath);\n        // }\n    \n    \n    return (\n        <>\n        <div style= {{ padding: '2em'}}>\n            <form onSubmit={submitHelper}>\n                <label>Recipe Name</label>\n                <input onChange={changeHandler} value={formData.title} type=\"text\" name=\"title\"></input>\n                    <br/>\n                <label>Ingredients</label>\n                <input onChange={changeHandler} value={formData.ingredients} type=\"text\" name=\"ingredients\"></input>\n                    <br/>\n                <label>Instructions</label>\n                <input onChange={changeHandler} value={formData.instructions} type=\"text\" name=\"instructions\"></input>\n                    <br/>\n                <label>Add Photo</label>\n                <input onChange={changeHandler} value={formData.img_url} type=\"text\" name=\"img_url\"></input>\n                    <br/>\n                <label>Description</label>\n                <input onChange={changeHandler} value={formData.description} type=\"text\" name=\"description\"></input>\n                    <br/>\n                <button type=\"submit\">Submit</button>\n            </form>\n        </div>\n        </>\n    )\n}"]},"metadata":{},"sourceType":"module"}